# OrbitPouchStore

[![stability](https://img.shields.io/badge/stability-experimental-orange.svg?style=flat-square)](https://nodejs.org/api/documentation.html#documentation_stability_index)
[![npm version](https://img.shields.io/npm/v/@garbados/orbit-pouch-store.svg?style=flat-square)](https://www.npmjs.com/package/orbit-pouch-store)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square)](https://github.com/feross/standard)
[![build status](https://img.shields.io/travis/garbados/orbit-pouch-store/master.svg?style=flat-square)](https://travis-ci.org/garbados/orbit-pouch-store)
[![test coverage](https://img.shields.io/coveralls/github/garbados/orbit-pouch-store/master.svg?style=flat-square)](https://coveralls.io/github/garbados/orbit-pouch-store)
[![greenkeeper](https://badges.greenkeeper.io/garbados/orbit-pouch-store.svg)](https://greenkeeper.io/)

An [OrbitDB](https://github.com/orbitdb/orbit-db) store that uses [PouchDB](https://pouchdb.com/) for indexing, allowing you to perform flexible [mango](https://pouchdb.com/guides/mango-queries.html) queries. It extends [orbit-db-docstore](https://github.com/orbitdb/orbit-db-docstore).

## Why?

OrbitDB is a distributed database that stores records as [IPFS blocks](https://github.com/ipfs/interface-ipfs-core/blob/master/SPEC/BLOCK.md) so that they can be 1) de-duplicated 2) replicated with peers. You can get and share OrbitDB stores by sharing their address, and you can create subsets of your data that peer from users that have the same blocks, even if those blocks aren't part of the same subset or even of the same originating data.

However, OrbitDB's default stores provide only rudimentary indexing, limiting the queries you can make of your data. So, I created a store that used PouchDB for indexing.

OrbitPouchStore is an OrbitDB store that uses a PouchDB instance to index its oplog. That allows you to perform [mango](https://pouchdb.com/guides/mango-queries.html) queries and [map/reduce](https://pouchdb.com/guides/queries.html) queries, among other neat things.

I hope you find it useful!

## Install

Install using [npm](https://www.npmjs.com):

```bash
npm i -S orbit-pouch-store
```

Now you can use it with OrbitDB:

```javascript
// 1. add pouch as a store type
const OrbitPouchStore = require('orbit-pouch-store')
OrbitDB.addType('pouch', OrbitPouchStore)

// 2. once you have an orbitdb instance, create the store
const pouch = await orbitdb.create('my-app', 'pouch', options)

// 3. do the thing!
let result = await pouch.put({ greetings: 'hello world' })
let doc = await pouch.get(result.id)
console.log(doc.greetings)
> hello world
```

## Usage

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

## Contributing

This library is experimental. All contributions are welcome: bug reports, feature requests, "why doesn't this work" questions, pull requests for fixes and features, etc. For all of the above, [file an issue](https://github.com/garbados/orbit-pouch-store/issues) or [submit a pull request](https://github.com/garbados/orbit-pouch-store/pulls).

## License

[Apache-2.0](https://www.apache.org/licenses/LICENSE-2.0)
